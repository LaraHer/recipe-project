<!DOCTYPE html>
<html>
<head>

<script  src="jquery.js"> </script>
<link type="text/css" rel="stylesheet" href="stylesheet.css"/>
<meta charset="utf-8">

<title>Rezeptliste</title>

<script type="text/javascript">


var cur = 0;

shoppinglist = new Array ();

var rezeptListe = loadData();

function loadData(){

	var rezeptBuch = new Array ();
	
	var zutatenListe = new Array();
	
	zutatenListe.push ({name: "Salat", menge: 1, einheit: "Kopf"});
	zutatenListe.push ({name: "Tomaten", menge: 300, einheit: "g"});
	zutatenListe.push ({name: "Gurke", menge: 150, einheit: "g"});
	zutatenListe.push ({name: "Feta", menge: 200, einheit: "g"});
	zutatenListe.push ({name: "Oliven", menge: 120, einheit: "g"});
	zutatenListe.push ({name: "Olivenöl", menge: 6, einheit: "EL"});
	zutatenListe.push ({name: "Balsamico Essig", menge: 2, einheit: "EL"});
	zutatenListe.push ({name: "Salz", menge: 1, einheit: "Prise"});
	zutatenListe.push ({name: "Pfeffer", menge: 1, einheit: "Prise"});
	rezeptBuch.push( 
		{titel: "Griechischer Salat", 
		 zutaten : zutatenListe, 
		 text:"Ein Salat ist einfach", 
		 zeit : 15
		}
	);
	
	zutatenListe = new Array();
	
	zutatenListe.push ({name: "Frühlingszwiebeln", menge: 4, einheit: "Stück"});
	zutatenListe.push ({name: "Chilischote", menge: 1, einheit: "Stück"});
	zutatenListe.push ({name: "Koriandergrün", menge: 15, einheit: "g"});
	zutatenListe.push ({name: "Tomaten", menge: 750, einheit: "g"});
	zutatenListe.push ({name: "Knoblauchzehen", menge: 2, einheit: "Stück"});
	zutatenListe.push ({name: "Kichererbsen", menge: 400, einheit: "g"});
	zutatenListe.push ({name: "Feta", menge: 30, einheit: "g"});
	zutatenListe.push ({name: "Limetten", menge: 1, einheit: "Stück"});
	rezeptBuch.push( 
		{titel: "Tomatensuppe", 
		 zutaten : zutatenListe, 
		 text:"Ist total einfach", 
		 zeit : 30
		}
	);


	zutatenListe = new Array();
	
	zutatenListe.push ({name: "Paprika", menge: 200, einheit: "g"});
	zutatenListe.push ({name: "Zucchini", menge: 250, einheit: "g"});
	zutatenListe.push ({name: "Chilischote", menge: 1, einheit: "Stück"});
	zutatenListe.push ({name: "Vollkorn-Baguette", menge: 40, einheit: "g"});
	zutatenListe.push ({name: "Olivenöl", menge: 2, einheit: "EL"});
	zutatenListe.push ({name: "Bandnudeln", menge: 400, einheit: "g"});
	zutatenListe.push ({name: "Salz", menge: 1, einheit: "Prise"});
	zutatenListe.push ({name: "Rapsöl", menge: 1, einheit: "EL"});
	zutatenListe.push ({name: "Knoblauchzehe", menge: 1, einheit: "Stück"});
	zutatenListe.push ({name: "Pfeffer", menge: 1, einheit: "Prise"});
	rezeptBuch.push( 
		{titel: "Paprika-Zucchini-Nudeln", 
		 zutaten : zutatenListe, 
		 text:"leicht", 
		 zeit : 45
		}
	);	
	return rezeptBuch;
}

	
function zeigeRezept(){
	var rezeptListe = loadData();

	var myString ="<h1>Rezepte</h1><h2>"+rezeptListe[cur].titel+"</h2>";

	myString += "<button onClick='zeigePortion()' >2 Portionen</button>";

	myString += "<a onclick='zurueck()' href='#'><img class='pfeile' src='icons/pfeil_links.png/'></a>"+" ";

	myString += "<a onclick='vor()' href='#'><img class='pfeile' src='icons/pfeil_rechts.png/'></a><br/><br/>";


	myString += "<table>";
	myString += "<tr><td><b>Zutaten</b></td><td><b>Menge</b></td><td></td></tr>";	
	for (var i = 0; i < rezeptListe[cur].zutaten.length; i++){	
	myString += "<tr><td>"+rezeptListe[cur].zutaten[i].name+"</td><td>"+rezeptListe[cur].zutaten[i].menge+" "+rezeptListe[cur].zutaten[i].einheit+"</td><td><a onClick='addToListe(\""+rezeptListe[cur].zutaten[i].menge+' '+rezeptListe[cur].zutaten[i].einheit+' '+rezeptListe[cur].zutaten[i].name+"\")' ><img class='plus' src='icons/plus.png/'></a></td></tr>";
	}
	myString += "</table><br/>";
	myString += "<table>";
	myString += "<tr><td>Zubereitung</td><td>"+rezeptListe[cur].text+"</td></tr>";
	myString += "</table><br/>";
	
	myString += "<table>";
	myString += "<tr><td>Dauer</td><td>"+rezeptListe[cur].zeit+" Minuten</td></tr>";
	
    myString += "</table><br/>";

	document.getElementById('display').innerHTML = myString;
}	

function zeigePortion(){
	var rezeptListe = loadData();

	var myString ="<h1>Rezepte</h1><h2>"+rezeptListe[cur].titel+"</h2>";

	myString += "<button onClick='zeigeRezept()' >4 Portionen</button>";

	myString += "<a onclick='zurueck()' href='#'>Zurück</a>"+" ";

	myString += "<a onclick='vor()' href='#'>Vor</a><br/><br/>";


	myString += "<table>";
	myString += "<tr><td><b>Zutaten</b></td><td><b>Menge</b></td><td></td></tr>";	
	for (var i = 0; i < rezeptListe[cur].zutaten.length; i++){	
	myString += "<tr><td>"+rezeptListe[cur].zutaten[i].name+"</td><td>"+rezeptListe[cur].zutaten[i].menge/2+" "+rezeptListe[cur].zutaten[i].einheit+"</td><td><button onClick='addToListe(\""+rezeptListe[cur].zutaten[i].menge/2+' '+rezeptListe[cur].zutaten[i].einheit+' '+rezeptListe[cur].zutaten[i].name+"\")' >hinzufügen</button></td></tr>";
	}
	myString += "</table><br/>";
	myString += "<table>";
	myString += "<tr><td>Zubereitung</td><td>"+rezeptListe[cur].text+"</td></tr>";
	myString += "</table><br/>";
	
	myString += "<table>";
	myString += "<tr><td>Dauer</td><td>"+rezeptListe[cur].zeit+" Minuten</td></tr>";
	
    myString += "</table><br/>";

	document.getElementById('display').innerHTML = myString;
}	
function vor(){
	if (cur < 3){cur++;} //Länge des Rezeptes
	console.log("Aktuelles Rezept:"+cur);
	zeigeRezept();
}

function zurueck(){
	if (cur > 0){cur--;}
	console.log("Aktuelles Rezept:"+cur);
	zeigeRezept();
}

function zeigeShoppinglist(){
	restoreContents();
	var myString = "<h2>Einkaufsliste</h2>";

	myString += "<button onclick='allesLoeschen(\""+shoppinglist[i]+"\")' >löschen</button>";
	
	myString += "<ul>";
	for (var i = 0; i < shoppinglist.length; i++){	
		myString += "<li id='dinge'>"+shoppinglist[i]+"<button onclick='loeschen(\""+shoppinglist[i]+"\")' >löschen</button></li>";
	}
	myString += "</ul>";
	
	document.getElementById('display').innerHTML = myString;
	
}

function populateStorage (){
	localStorage.setItem('shoppingInhalt', JSON.stringify(shoppinglist));
}
function restoreContents (){
	shoppinglist = JSON.parse(localStorage.getItem('shoppingInhalt'));
	console.log("ausgeben");
}

function addToListe(eintrag) {

	console.log("klappt" + eintrag);
	shoppinglist.push(eintrag);
	populateStorage();
}

function allesLoeschen (waren) {
	shoppinglist.splice(waren);
	   localStorage.clear();
    window.location.reload();
	}
//var waren = new Array (shoppinglist[i])

	//for (var i = 0; i < shoppinglist.length; i++){


//function loeschen(inhalt){
	//localStorage.removeItem('shoppingInhalt');
	//console.log('leer');
//}

</script>

</head>
<body onload="zeigeRezept()">

<a onclick="zeigeShoppinglist()" href="#">Einkaufsliste</a>

<a onclick="zeigeRezept()" href="#">Rezepte</a>

<div id="display"></div>

</body>
</html>